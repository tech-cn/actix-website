(self.webpackChunkactix_website=self.webpackChunkactix_website||[]).push([[565],{2412:(e,t,r)=>{var a={"./application/src/app.rs":[7995,7995],"./application/src/combine.rs":[7882,7882],"./application/src/config.rs":[8254,8254],"./application/src/main.rs":[6542,6542],"./application/src/mutable_state.rs":[8235,8235],"./application/src/scope.rs":[4395,4395],"./application/src/state.rs":[5971,5971],"./application/src/vh.rs":[4346,4346],"./async-handlers/src/main.rs":[6220,6220],"./async-handlers/src/stream.rs":[7944,7944],"./databases/src/main.rs":[7644,7644],"./easy-form-handling/src/main.rs":[8230,8230],"./either/src/main.rs":[9677,9677],"./errors/src/helpers.rs":[5786,5786],"./errors/src/logging.rs":[2524,2524],"./errors/src/main.rs":[2245,2245],"./errors/src/override_error.rs":[4547,4547],"./errors/src/recommend_one.rs":[7942,7942],"./errors/src/recommend_two.rs":[2244,2244],"./extractors/src/form.rs":[6733,6733],"./extractors/src/json_one.rs":[1533,1533],"./extractors/src/json_two.rs":[1522,1522],"./extractors/src/main.rs":[3108,3108],"./extractors/src/multiple.rs":[2591,2591],"./extractors/src/path_one.rs":[1341,1341],"./extractors/src/path_three.rs":[857,857],"./extractors/src/path_two.rs":[2544,2544],"./extractors/src/query.rs":[2790,2790],"./flexible-responders/src/main.rs":[7319,7319],"./getting-started/src/main.rs":[7370,7370],"./http2/src/main.rs":[4988,4988],"./main-example/src/main.rs":[1324,1324],"./middleware/src/default_headers.rs":[5693,5693],"./middleware/src/errorhandler.rs":[2856,2856],"./middleware/src/logger.rs":[340,340],"./middleware/src/main.rs":[2871,2871],"./middleware/src/user_sessions.rs":[1366,1366],"./middleware/src/wrap_fn.rs":[4398,4398],"./powerful-extractors/src/main.rs":[2509,2509],"./request-handlers/src/handlers_arc.rs":[2517,2517],"./request-handlers/src/main.rs":[3802,3802],"./request-routing/src/main.rs":[6461,6461],"./requests/src/main.rs":[6080,6080],"./requests/src/manual.rs":[9517,9517],"./requests/src/multipart.rs":[9327,9327],"./requests/src/streaming.rs":[7219,7219],"./requests/src/urlencoded.rs":[6982,6982],"./responder-trait/src/main.rs":[3514,3514],"./responses/src/auto.rs":[4147,4147],"./responses/src/chunked.rs":[2809,2809],"./responses/src/identity.rs":[3854,3854],"./responses/src/identity_two.rs":[870,870],"./responses/src/json_resp.rs":[1819,1819],"./responses/src/main.rs":[4938,4938],"./server/src/keep_alive.rs":[592,592],"./server/src/keep_alive_tp.rs":[8983,8983],"./server/src/main.rs":[8128,8128],"./server/src/signals.rs":[7132,7132],"./server/src/ssl.rs":[151,151],"./server/src/workers.rs":[4012,4012],"./static-files/src/configuration.rs":[4031,4031],"./static-files/src/configuration_two.rs":[8861,8861],"./static-files/src/directory.rs":[4333,4333],"./static-files/src/main.rs":[7135,7135],"./testing/src/integration_one.rs":[179,6841],"./testing/src/integration_two.rs":[6720,6720],"./testing/src/main.rs":[4198,4198],"./testing/src/stream_response.rs":[926,926],"./url-dispatch/src/cfg.rs":[3146,3146],"./url-dispatch/src/dhandler.rs":[6692,6692],"./url-dispatch/src/guard.rs":[5052,5052],"./url-dispatch/src/guard2.rs":[8207,8207],"./url-dispatch/src/main.rs":[710,710],"./url-dispatch/src/minfo.rs":[813,813],"./url-dispatch/src/norm.rs":[966,966],"./url-dispatch/src/norm2.rs":[5315,5315],"./url-dispatch/src/path.rs":[3403,3403],"./url-dispatch/src/path2.rs":[9765,9765],"./url-dispatch/src/pbuf.rs":[3173,3173],"./url-dispatch/src/resource.rs":[960,960],"./url-dispatch/src/scope.rs":[8536,8536],"./url-dispatch/src/url_ext.rs":[2312,2312],"./url-dispatch/src/urls.rs":[4808,4808],"./websockets/src/main.rs":[1256,1256]};function n(e){if(!r.o(a,e))return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=a[e],n=t[0];return r.e(t[1]).then((()=>r(n)))}n.keys=()=>Object.keys(a),n.id=2412,e.exports=n},3905:(e,t,r)=>{"use strict";r.d(t,{Zo:()=>c,kt:()=>d});var a=r(7294);function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r,a,n={},p=Object.keys(e);for(a=0;a<p.length;a++)r=p[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(e);for(a=0;a<p.length;a++)r=p[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var i=a.createContext({}),o=function(e){var t=a.useContext(i),r=t;return e&&(r="function"==typeof e?e(t):s(s({},t),e)),r},c=function(e){var t=o(e.components);return a.createElement(i.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},u=a.forwardRef((function(e,t){var r=e.components,n=e.mdxType,p=e.originalType,i=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),u=o(r),d=n,k=u["".concat(i,".").concat(d)]||u[d]||m[d]||p;return r?a.createElement(k,s(s({ref:t},c),{},{components:r})):a.createElement(k,s({ref:t},c))}));function d(e,t){var r=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var p=r.length,s=new Array(p);s[0]=u;var l={};for(var i in t)hasOwnProperty.call(t,i)&&(l[i]=t[i]);l.originalType=e,l.mdxType="string"==typeof e?e:n,s[1]=l;for(var o=2;o<p;o++)s[o]=r[o];return a.createElement.apply(null,s)}return a.createElement.apply(null,r)}u.displayName="MDXCreateElement"},2536:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var a=r(7294),n=r(814);const p=e=>{let{example:t,file:p,section:s}=e;const[l,i]=(0,a.useState)("");return(0,a.useEffect)((()=>{let e=!0;return r(2412)(`./${t}/src/${p||"main.rs"}`).then((t=>{t=t.default.match(new RegExp(`// <${s}>\n([\\s\\S]*)// </${s}>`))[1],e&&i(t)})).catch((e=>console.log(e))),()=>{e=!1}}),[]),a.createElement(n.Z,{className:"language-rust"},l)}},3198:(e,t,r)=>{"use strict";r.r(t),r.d(t,{assets:()=>o,contentTitle:()=>l,default:()=>u,frontMatter:()=>s,metadata:()=>i,toc:()=>c});var a=r(7462),n=(r(7294),r(3905)),p=r(2536);const s={title:"\u8def\u7531\u5206\u53d1"},l="\u8def\u7531\u5206\u53d1",i={unversionedId:"url-dispatch",id:"url-dispatch",title:"\u8def\u7531\u5206\u53d1",description:"\u8def\u7531\u5206\u53d1\u63d0\u4f9b\u4e86\u4e00\u79cd\u7b80\u5355\u7684\u65b9\u5f0f\uff0c\u4f7f\u7528\u6a21\u5f0f\u5339\u914d\u5c06 URL \u6620\u5c04\u5230\u8bf7\u6c42\u5904\u7406\u7a0b\u5e8f\u3002\u5982\u679c\u5176\u4e2d\u4e00\u4e2a\u6a21\u5f0f\u4e0e\u8bf7\u6c42\u5173\u8054\u7684 URL \u5339\u914d\uff0c\u5219\u8c03\u7528\u8be5\u7684\u5904\u7406\u7a0b\u5e8f\u3002",source:"@site/docs/url-dispatch.md",sourceDirName:".",slug:"/url-dispatch",permalink:"/actix-website/docs/url-dispatch",draft:!1,editUrl:"https://github.com/actix/actix-website/edit/master/docs/url-dispatch.md",tags:[],version:"current",frontMatter:{title:"\u8def\u7531\u5206\u53d1"},sidebar:"docs",previous:{title:"\u9519\u8bef\u5904\u7406",permalink:"/actix-website/docs/errors"},next:{title:"\u8bf7\u6c42",permalink:"/actix-website/docs/request"}},o={},c=[{value:"\u8d44\u6e90\u914d\u7f6e",id:"\u8d44\u6e90\u914d\u7f6e",level:2},{value:"\u8def\u7531\u914d\u7f6e",id:"\u8def\u7531\u914d\u7f6e",level:3},{value:"\u8def\u7531\u5339\u914d",id:"\u8def\u7531\u5339\u914d",level:2},{value:"\u8d44\u6e90 pattern \u8bed\u6cd5",id:"\u8d44\u6e90-pattern-\u8bed\u6cd5",level:2},{value:"\u8def\u7531\u4f5c\u7528\u57df",id:"\u8def\u7531\u4f5c\u7528\u57df",level:2},{value:"\u5339\u914d\u4fe1\u606f",id:"\u5339\u914d\u4fe1\u606f",level:2},{value:"\u8def\u5f84\u4fe1\u606f\u63d0\u53d6\u5668",id:"\u8def\u5f84\u4fe1\u606f\u63d0\u53d6\u5668",level:3},{value:"\u751f\u6210\u8d44\u6e90 URL",id:"\u751f\u6210\u8d44\u6e90-url",level:2},{value:"\u5916\u90e8\u8d44\u6e90",id:"\u5916\u90e8\u8d44\u6e90",level:2},{value:"\u8def\u5f84\u89c4\u8303\u5316\u548c\u91cd\u5b9a\u5411\u5230\u9644\u52a0 <code>/</code> \u7684\u8def\u7531",id:"\u8def\u5f84\u89c4\u8303\u5316\u548c\u91cd\u5b9a\u5411\u5230\u9644\u52a0--\u7684\u8def\u7531",level:2},{value:"\u4f7f\u7528\u4e00\u4e2a\u5e94\u7528\u524d\u7f00\u6765\u7ec4\u5408\u5e94\u7528",id:"\u4f7f\u7528\u4e00\u4e2a\u5e94\u7528\u524d\u7f00\u6765\u7ec4\u5408\u5e94\u7528",level:3},{value:"\u81ea\u5b9a\u4e49\u8def\u7531\u5b88\u536b",id:"\u81ea\u5b9a\u4e49\u8def\u7531\u5b88\u536b",level:2},{value:"\u6539\u53d8\u5b88\u536b\u7684\u542b\u4e49",id:"\u6539\u53d8\u5b88\u536b\u7684\u542b\u4e49",level:3},{value:"\u6539\u53d8\u9ed8\u8ba4\u7684 Not Found \u54cd\u5e94",id:"\u6539\u53d8\u9ed8\u8ba4\u7684-not-found-\u54cd\u5e94",level:2}],m={toc:c};function u(e){let{components:t,...r}=e;return(0,n.kt)("wrapper",(0,a.Z)({},m,r,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h1",{id:"\u8def\u7531\u5206\u53d1"},"\u8def\u7531\u5206\u53d1"),(0,n.kt)("p",null,"\u8def\u7531\u5206\u53d1\u63d0\u4f9b\u4e86\u4e00\u79cd\u7b80\u5355\u7684\u65b9\u5f0f\uff0c\u4f7f\u7528\u6a21\u5f0f\u5339\u914d\u5c06 URL \u6620\u5c04\u5230\u8bf7\u6c42\u5904\u7406\u7a0b\u5e8f\u3002\u5982\u679c\u5176\u4e2d\u4e00\u4e2a\u6a21\u5f0f\u4e0e\u8bf7\u6c42\u5173\u8054\u7684 URL \u5339\u914d\uff0c\u5219\u8c03\u7528\u8be5\u7684\u5904\u7406\u7a0b\u5e8f\u3002"),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"\u8bf7\u6c42\u5904\u7406\u7a0b\u5e8f\u662f\u4e00\u4e2a\u51fd\u6570\uff0c\u5b83\u53ef\u4ee5\u63a5\u6536 0 \u4e2a\u6216\u591a\u4e2a\u53ef\u4ee5\u4ece\u8bf7\u6c42\u4e2d\u63d0\u53d6\u4fe1\u606f\u7684\u53c2\u6570\uff08\u5373 ",(0,n.kt)("a",{parentName:"p",href:"https://docs.rs/actix-web/4/actix_web/trait.FromRequest.html"},(0,n.kt)("em",{parentName:"a"},"impl FromRequest")),"\uff09\uff0c\u5e76\u8fd4\u56de\u4e00\u4e2a\u53ef\u4ee5\u8f6c\u6362\u4e3a HttpResponse \u7684\u503c\uff08\u5373 ",(0,n.kt)("a",{parentName:"p",href:"https://docs.rs/actix-web/4/actix_web/trait.Responder.html"},(0,n.kt)("em",{parentName:"a"},"impl Responder")),"\uff09\u3002\u66f4\u591a\u7684\u4fe1\u606f\u53ef\u4ee5\u53c2\u8003 ",(0,n.kt)("a",{parentName:"p",href:"/docs/handlers/"},"handler \u7ae0\u8282"),"\u3002")),(0,n.kt)("h2",{id:"\u8d44\u6e90\u914d\u7f6e"},"\u8d44\u6e90\u914d\u7f6e"),(0,n.kt)("p",null,"\u8d44\u6e90\u914d\u7f6e\u662f\u5411\u5e94\u7528\u4e2d\u6dfb\u52a0\u65b0\u8d44\u6e90\u7684\u884c\u4e3a\u3002\u8d44\u6e90\u90fd\u6709\u4e00\u4e2a\u540d\u79f0\uff0c\u4f5c\u4e3a\u751f\u6210 URL \u65f6\u7684\u6807\u8bc6\u7b26\u3002\u8d44\u6e90\u7684\u540d\u79f0\u4e5f\u5141\u8bb8\u5f00\u53d1\u8005\u5411\u5df2\u5b58\u5728\u7684\u8d44\u6e90\u6dfb\u52a0\u8def\u7531\u3002\u8d44\u6e90\u8fd8\u4f1a\u6709\u4e00\u4e2a pattern\uff0c\u7528\u4e8e\u5339\u914d ",(0,n.kt)("em",{parentName:"p"},"URL")," \u7684 ",(0,n.kt)("em",{parentName:"p"},"PATH")," \u90e8\u5206 (\u5728\u7aef\u53e3\u53f7\u4e4b\u540e\u7684\u90e8\u5206\uff0c \u4f8b\u5982 ",(0,n.kt)("em",{parentName:"p"},"URL")," ",(0,n.kt)("em",{parentName:"p"},"http://localhost:8080/foo/bar?q=value")," \u7684 ",(0,n.kt)("em",{parentName:"p"},"/foo/ba")," \u90e8\u5206\uff09\u3002\u4e0d\u4f1a\u5339\u914d\u5230 ",(0,n.kt)("em",{parentName:"p"},"QUERY")," \u90e8\u5206\uff08",(0,n.kt)("em",{parentName:"p"},"?")," \u540e\u9762\u7684\u90e8\u5206\uff0c\u4f8b\u5982 ",(0,n.kt)("em",{parentName:"p"},"http://localhost:8080/foo/bar?q=value")," \u4e2d\u7684 ",(0,n.kt)("em",{parentName:"p"},"q=value")," \u90e8\u5206\uff09."),(0,n.kt)("p",null,(0,n.kt)("a",{parentName:"p",href:"https://docs.rs/actix-web/4/actix_web/struct.App.html#method.route"},(0,n.kt)("em",{parentName:"a"},"App::route()"))," \u65b9\u6cd5\u63d0\u4f9b\u4e86\u6ce8\u518c\u8def\u7531\u7684\u7b80\u5355\u65b9\u5f0f\u3002\u8be5\u65b9\u6cd5\u4f1a\u5411\u5e94\u7528\u8def\u7531\u8868\u4e2d\u6dfb\u52a0\u4e00\u4e2a\u8def\u7531\u3002\u8be5\u65b9\u6cd5\u63a5\u6536\u4e00\u4e2a ",(0,n.kt)("em",{parentName:"p"},"path patter"),"\uff0c",(0,n.kt)("em",{parentName:"p"},"HTTP \u8bf7\u6c42\u65b9\u6cd5")," \u548c\u4e00\u4e2a\u5904\u7406\u51fd\u6570\u4f5c\u4e3a\u53c2\u6570\u3002",(0,n.kt)("inlineCode",{parentName:"p"},"route()")," \u65b9\u6cd5\u53ef\u4ee5\u5bf9\u591a\u4e2a\u8def\u5f84\u8c03\u7528\u591a\u6b21\uff0c\u8fd9\u6837\u540c\u4e00\u4e2a\u8d44\u6e90\u8def\u5f84\u4e0b\u53ef\u4ee5\u6ce8\u518c\u591a\u4e2a\u8def\u7531\u3002"),(0,n.kt)(p.Z,{example:"url-dispatch",section:"main",mdxType:"CodeBlock"}),(0,n.kt)("p",null,"\u867d\u7136 ",(0,n.kt)("em",{parentName:"p"},"App::route()")," \u63d0\u4f9b\u4e86\u6ce8\u518c\u8def\u7531\u7684\u7b80\u5355\u65b9\u5f0f\uff0c\u4f46\u8981\u8bbf\u95ee\u5b8c\u6574\u7684\u8d44\u6e90\u914d\u7f6e\uff0c\u5fc5\u987b\u4f7f\u7528\u53e6\u4e00\u79cd\u65b9\u6cd5\u3002",(0,n.kt)("a",{parentName:"p",href:"https://docs.rs/actix-web/4/actix_web/struct.App.html?search=#method.service"},(0,n.kt)("em",{parentName:"a"},"App::service()"))," \u65b9\u6cd5\u5c06\u5355\u4e2a ",(0,n.kt)("a",{parentName:"p",href:"https://docs.rs/actix-web/4/actix_web/struct.Resource.html"},"\u8d44\u6e90")," \u6dfb\u52a0\u5230\u5e94\u7528\u8def\u7531\u8868\u4e2d\u3002\u8be5\u65b9\u6cd5\u63a5\u53d7 ",(0,n.kt)("em",{parentName:"p"},"path pattern"),"\u3001guards \u4ee5\u53ca\u4e00\u4e2a\u6216\u591a\u4e2a\u8def\u7531\u3002"),(0,n.kt)(p.Z,{example:"url-dispatch",file:"resource.rs",section:"resource",mdxType:"CodeBlock"}),(0,n.kt)("p",null,"\u5982\u679c\u8bbf\u95ee\u7684\u8d44\u6e90\u4e0d\u5305\u542b\u4efb\u4f55\u8def\u7531\u6216\u6ca1\u6709\u4efb\u4f55\u5339\u914d\u7684\u8def\u7531\uff0c\u5219\u4f1a\u8fd4\u56de ",(0,n.kt)("em",{parentName:"p"},"NOT FOUND")," HTTP \u54cd\u5e94\u3002"),(0,n.kt)("h3",{id:"\u8def\u7531\u914d\u7f6e"},"\u8def\u7531\u914d\u7f6e"),(0,n.kt)("p",null,"\u8d44\u6e90\u5305\u542b\u4e00\u7ec4\u8def\u7531\u3002\u6bcf\u4e2a\u8def\u7531\u6709\u5305\u542b\u4e00\u7ec4\u5b88\u536b\uff08",(0,n.kt)("inlineCode",{parentName:"p"},"guards"),"\uff09\u548c\u4e00\u4e2a\u5904\u7406\u7a0b\u5e8f\u3002\u53ef\u4ee5\u4f7f\u7528 ",(0,n.kt)("inlineCode",{parentName:"p"},"Resource::route()")," \u65b9\u6cd5\u521b\u5efa\u65b0\u8def\u7531\uff0c\u8be5\u65b9\u6cd5\u8fd4\u56de\u5bf9\u65b0 ",(0,n.kt)("a",{parentName:"p",href:"https://docs.rs/actix-web/4/actix_web/struct.Route.html"},(0,n.kt)("em",{parentName:"a"},"\u8def\u7531"))," \u5b9e\u4f8b\u7684\u5f15\u7528\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u8def\u7531\u4e0d\u5305\u542b\u4efb\u4f55 guards\uff0c\u56e0\u6b64\u53ef\u4ee5\u5339\u914d\u6240\u6709\u8bf7\u6c42\uff0c\u800c\u9ed8\u8ba4\u5904\u7406\u7a0b\u5e8f\u662f ",(0,n.kt)("inlineCode",{parentName:"p"},"HttpNotFound"),"\u3002"),(0,n.kt)("p",null,"\u5e94\u7528\u4f1a\u6839\u636e\u8d44\u6e90\u6ce8\u518c\u548c\u8def\u7531\u6ce8\u518c\u65f6\u5b9a\u4e49\u7684\u6761\u4ef6\u6765\u8def\u7531\u4f20\u5165\u7684\u8bf7\u6c42\u3002\u8d44\u6e90\u4f1a\u6309\u7167\u901a\u8fc7 ",(0,n.kt)("inlineCode",{parentName:"p"},"Resource::route()")," \u6ce8\u518c\u7684\u8def\u7531\u987a\u5e8f\u5339\u914d\u5176\u5305\u542b\u7684\u6240\u6709\u8def\u7531\u3002"),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"\u4e00\u4e2a\u8def\u7531\u53ef\u4ee5\u5305\u542b\u4efb\u610f\u6570\u91cf\u7684 ",(0,n.kt)("em",{parentName:"p"},"\u5b88\u536b"),"\uff0c\u4f46\u4ec5\u53ef\u4ee5\u5305\u542b\u4e00\u4e2a\u5904\u7406\u7a0b\u5e8f\u3002")),(0,n.kt)(p.Z,{example:"url-dispatch",file:"cfg.rs",section:"cfg",mdxType:"CodeBlock"}),(0,n.kt)("p",null,"\u5728\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\uff0c\u5982\u679c ",(0,n.kt)("em",{parentName:"p"},"GET")," \u8bf7\u6c42\u7684\u5934\u90e8 ",(0,n.kt)("inlineCode",{parentName:"p"},"Content-Type")," \u7684\u503c\u4e3a ",(0,n.kt)("em",{parentName:"p"},"text/plain"),"\uff0c\u5e76\u4e14 URL \u8def\u5f84\u4e3a ",(0,n.kt)("inlineCode",{parentName:"p"},"/path"),"\uff0c\u5219\u8fd4\u56de ",(0,n.kt)("inlineCode",{parentName:"p"},"HttpResponse::Ok()"),"\u3002"),(0,n.kt)("p",null,"\u5982\u679c\u4e00\u4e2a\u8d44\u6e90\u6ca1\u6709\u5339\u914d\u5230\u4efb\u4f55\u8def\u7531\uff0c\u5219\u4f1a\u54cd\u5e94 ",(0,n.kt)("em",{parentName:"p"},"NOT FOUND"),"\u3002"),(0,n.kt)("p",null,(0,n.kt)("a",{parentName:"p",href:"https://docs.rs/actix-web/4/actix_web/struct.Resource.html#method.route"},(0,n.kt)("em",{parentName:"a"},"ResourceHandler::route()"))," \u8fd4\u56de\u4e00\u4e2a ",(0,n.kt)("a",{parentName:"p",href:"https://docs.rs/actix-web/4/actix_web/struct.Route.html"},(0,n.kt)("em",{parentName:"a"},"Route"))," \u5bf9\u8c61\u3002\u8def\u7531\u53ef\u4ee5\u4f7f\u7528\u7c7b\u4f3c\u6784\u5efa\u5668\u7684\u6a21\u5f0f\u8fdb\u884c\u914d\u7f6e\u3002\u914d\u7f6e\u65b9\u6cd5\u5982\u4e0b\uff1a"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://docs.rs/actix-web/4/actix_web/struct.Route.html#method.guard"},(0,n.kt)("em",{parentName:"a"},"Route::guard()"))," \u6ce8\u518c\u4e00\u4e2a\u5bfc\u822a\u5b88\u536b\u3002\u6bcf\u4e00\u4e2a\u8def\u7531\u90fd\u53ef\u4ee5\u6ce8\u518c\u4efb\u610f\u6570\u91cf\u7684\u5b88\u536b\u3002"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://docs.rs/actix-web/4/actix_web/struct.Route.html#method.method"},(0,n.kt)("em",{parentName:"a"},"Route::method()"))," \u6ce8\u518c\u4e00\u4e2a\u8bf7\u6c42\u65b9\u6cd5\u3002\u6bcf\u4e2a\u8def\u7531\u90fd\u53ef\u4ee5\u6ce8\u518c\u4efb\u610f\u6570\u91cf\u7684\u8bf7\u6c42\u65b9\u6cd5\u3002"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://docs.rs/actix-web/4/actix_web/struct.Route.html#method.to"},(0,n.kt)("em",{parentName:"a"},"Route::to()"))," \u6ce8\u518c\u4e00\u4e2a\u5f02\u6b65\u7684\u5904\u7406\u51fd\u6570\u3002\u53ea\u80fd\u6ce8\u518c\u4e00\u4e2a\u5904\u7406\u51fd\u6570\uff0c\u901a\u5e38\u6700\u540e\u4e00\u4e2a\u6ce8\u518c\u7684\u5904\u7406\u51fd\u6570\u4f1a\u751f\u6548\u3002")),(0,n.kt)("h2",{id:"\u8def\u7531\u5339\u914d"},"\u8def\u7531\u5339\u914d"),(0,n.kt)("p",null,"\u8def\u7531\u5339\u914d\u7684\u4e3b\u8981\u76ee\u7684\u662f\u5c06\u8bf7\u6c42\u7684 ",(0,n.kt)("inlineCode",{parentName:"p"},"path")," \u4e0e URL \u8def\u5f84\u6a21\u5f0f\u8fdb\u884c\u5339\u914d\uff08\u6216\u4e0d\u5339\u914d\uff09\u3002",(0,n.kt)("inlineCode",{parentName:"p"},"path")," \u8868\u793a\u8bf7\u6c42\u7684 URL \u7684\u8def\u5f84\u90e8\u5206\u3002"),(0,n.kt)("p",null,(0,n.kt)("em",{parentName:"p"},"actix-web")," \u5b9e\u73b0\u8fd9\u4e00\u529f\u80fd\u7684\u65b9\u6cd5\u975e\u5e38\u7b80\u5355\u3002\u6bcf\u5f53\u4e00\u4e2a\u8bf7\u6c42\u5230\u8fbe\uff0c\u5bf9\u4e8e\u5e94\u7528\u4e2d\u5b58\u5728\u7684\u6bcf\u4e2a\u8d44\u6e90\u914d\u7f6e\uff0cactix \u90fd\u4f1a\u6839\u636e\u58f0\u660e\u7684\u9ed8\u8ba4\u5bf9\u8bf7\u6c42\u7684\u8def\u5f84\u8fdb\u884c\u68c0\u67e5\u3002\u8fd9\u79cd\u68c0\u67e5\u6309\u7167\u901a\u8fc7 ",(0,n.kt)("inlineCode",{parentName:"p"},"App::service()")," \u65b9\u6cd5\u6ce8\u518c\u7684\u8def\u7531\u7684\u987a\u5e8f\u8fdb\u884c\u3002\u5982\u679c\u627e\u4e0d\u5230\u8d44\u6e90\uff0c\u5219\u4f7f\u7528 ",(0,n.kt)("em",{parentName:"p"},"\u9ed8\u8ba4\u8d44\u6e90")," \u4f5c\u4e3a\u5339\u914d\u7684\u8d44\u6e90\u3002"),(0,n.kt)("p",null,"\u58f0\u660e\u8def\u7531\u914d\u7f6e\u65f6\uff0c\u53ef\u4ee5\u5305\u542b\u8def\u7531\u5b88\u536b\u53c2\u6570\u3002\u4e0e\u8def\u7531\u914d\u7f6e\u5173\u8054\u7684\u6240\u6709\u8def\u7531\u5b88\u536b\u90fd\u5fc5\u987b\u4e3a\u7ed9\u5b9a\u8bf7\u6c42\u8fd4\u56de ",(0,n.kt)("inlineCode",{parentName:"p"},"true"),"\uff0c\u624d\u80fd\u5728\u68c0\u67e5\u671f\u95f4\u4f7f\u7528\u8be5\u8def\u7531\u914d\u7f6e\u3002\u5982\u679c\u5728\u8def\u7531\u914d\u7f6e\u7684\u8def\u7531\u5b88\u536b\u4e2d\u7684\u4efb\u4e00\u4e2a\u5b88\u536b\u5728\u68c0\u67e5\u671f\u95f4\u8fd4\u56de ",(0,n.kt)("inlineCode",{parentName:"p"},"false"),"\uff0c\u5219\u8df3\u8fc7\u8be5\u8def\u7531\uff0c\u5e76\u4e14\u8def\u7531\u5339\u914d\u5c06\u7ee7\u7eed\u901a\u8fc7\u8def\u7531\u6a21\u5f0f\u7684\u6709\u5e8f\u96c6\u5408\u8fdb\u884c\u3002"),(0,n.kt)("p",null,"\u5982\u679c\u6709\u8def\u7531\u5339\u914d\u5230\uff0c\u5219\u5339\u914d\u8fc7\u7a0b\u4f1a\u505c\u6b62\uff0c\u5e76\u8c03\u7528\u4e0e\u8def\u7531\u7ed1\u5b9a\u7684\u5904\u7406\u7a0b\u5e8f\u3002\u5982\u679c\u6240\u6709\u7684\u8def\u7531\u90fd\u68c0\u67e5\u4e86\uff0c\u4ecd\u7136\u6ca1\u6709\u8def\u7531\u5339\u914d\u5230\uff0c\u5219\u8fd4\u56de ",(0,n.kt)("em",{parentName:"p"},"NOT FOUND")," \u54cd\u5e94\u3002"),(0,n.kt)("h2",{id:"\u8d44\u6e90-pattern-\u8bed\u6cd5"},"\u8d44\u6e90 pattern \u8bed\u6cd5"),(0,n.kt)("p",null,"actix \u7684\u6a21\u5f0f\u5339\u914d\u8bed\u6cd5\u5f88\u7b80\u5355\u3002"),(0,n.kt)("p",null,"\u8def\u7531\u914d\u7f6e\u4e2d\u4f7f\u7528\u7684\u6a21\u5f0f\u53ef\u4ee5\u4ee5 ",(0,n.kt)("inlineCode",{parentName:"p"},"/")," \u5f00\u5934\u3002\u5982\u679c\u4e0d\u4ee5 ",(0,n.kt)("inlineCode",{parentName:"p"},"/")," \u5f00\u5934\uff0c\u5219\u5728\u5339\u914d\u65f6\u4f1a\u81ea\u52a8\u6dfb\u52a0 ",(0,n.kt)("inlineCode",{parentName:"p"},"/"),"\u3002\u4f8b\u5982\uff0c\u4ee5\u4e0b\u6a21\u5f0f\u662f\u7b49\u4ef7\u7684\uff1a"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"{foo}/bar/baz\n")),(0,n.kt)("p",null,"\u548c:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"/{foo}/bar/baz\n")),(0,n.kt)("p",null,(0,n.kt)("em",{parentName:"p"},"\u53ef\u53d8\u90e8\u5206"),"\uff08\u66ff\u6362\u6807\u8bb0\uff09\u4f7f\u7528 ",(0,n.kt)("em",{parentName:"p"},"{identifier}")," \u7684\u5f62\u5f0f\u6307\u5b9a\uff0c\u610f\u601d\u662f\u63a5\u6536\u4e0b\u4e00\u4e2a ",(0,n.kt)("inlineCode",{parentName:"p"},"/")," \u4e4b\u524d\u7684\u4efb\u4f55\u5b57\u7b26\uff0c\u5e76\u5c06\u5176\u7528\u4f5c ",(0,n.kt)("inlineCode",{parentName:"p"},"HttpRequest.match_info()")," \u5bf9\u8c61\u4e2d\u7684\u540d\u79f0\u3002"),(0,n.kt)("p",null,"\u6a21\u5f0f\u4e2d\u7684\u66ff\u6362\u6807\u8bb0\u76f8\u4e0e\u6b63\u5219\u8868\u8fbe\u5f0f ",(0,n.kt)("inlineCode",{parentName:"p"},"[^{}/]+")," \u76f8\u5339\u914d\u3002"),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"match_info")," \u662f ",(0,n.kt)("inlineCode",{parentName:"p"},"Params")," \u7684\u5bf9\u8c61\uff0c\u4ee3\u8868\u6839\u636e\u8def\u7531\u6a21\u5f0f\u4ece ",(0,n.kt)("em",{parentName:"p"},"URL")," \u4e2d\u63d0\u53d6\u7684\u52a8\u6001\u90e8\u5206\u3002\u5b83\u53ef\u4ee5\u901a\u8fc7 ",(0,n.kt)("inlineCode",{parentName:"p"},"request.match_info")," \u4f7f\u7528\u3002\u4f8b\u5982\uff0c\u4e0b\u9762\u7684\u6a21\u5f0f\u5b9a\u4e49\u4e86\u4e00\u4e2a\u6587\u5b57\u6bb5\uff08foo\uff09\u548c\u4e24\u4e2a\u66ff\u6362\u6807\u8bb0\uff08baz \u548c bar\uff09\uff1a"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"foo/{baz}/{bar}\n")),(0,n.kt)("p",null,"\u4e0a\u9762\u7684\u6a21\u5f0f\u5c06\u5339\u914d\u8fd9\u4e9b URL\uff0c\u5e76\u751f\u6210\u4ee5\u4e0b\u5339\u914d\u4fe1\u606f\uff1a"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"foo/1/2        -> Params {'baz': '1', 'bar': '2'}\nfoo/abc/def    -> Params {'baz': 'abc', 'bar': 'def'}\n")),(0,n.kt)("p",null,"\u4f46\u5b83\u4e0d\u5339\u914d\u4ee5\u4e0b\u6a21\u5f0f\uff1a"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"foo/1/2/        -> No match (trailing slash)\nbar/abc/def     -> First segment literal mismatch\n")),(0,n.kt)("p",null,"\u5bf9\u66ff\u6362\u6807\u8bb0\u8fdb\u884c\u5339\u914d\u65f6\uff0c\u6700\u591a\u53ea\u80fd\u5339\u914d\u5230\u6a21\u5f0f\u4e2d\u7b2c\u4e00\u4e2a\u975e\u5b57\u6bcd/\u6570\u5b57\u5b57\u7b26\u3002\u4e3e\u4f8b\u6765\u8bf4\uff0c\u5982\u679c\u4f7f\u7528\u4ee5\u4e0b\u8def\u7531\u6a21\u5f0f\uff1a"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"foo/{name}.html\n")),(0,n.kt)("p",null,"\u8def\u5f84 ",(0,n.kt)("inlineCode",{parentName:"p"},"/foo/biz.html")," \u5c06\u4e0e\u4e0a\u9762\u7684\u8def\u7531\u6a21\u5f0f\u5339\u914d\uff0c\u5339\u914d\u7ed3\u679c\u5c06\u662f ",(0,n.kt)("inlineCode",{parentName:"p"},"Params {'name': 'biz'}"),"\u3002\u4f46\u662f\u8def\u5f84 ",(0,n.kt)("inlineCode",{parentName:"p"},"/foo/biz")," \u5c06\u4e0d\u4f1a\u5339\u914d\uff0c\u56e0\u4e3a\u8fd9\u4e2a\u8def\u5f84\u7684\u672b\u5c3e\u4e0d\u5305\u542b ",(0,n.kt)("inlineCode",{parentName:"p"},".html"),"\uff0c\u800c\u662f\u53ea\u5305\u542b ",(0,n.kt)("inlineCode",{parentName:"p"},"biz"),"\u3002"),(0,n.kt)("p",null,"\u4e3a\u4e86\u6355\u83b7\u5230\u8fd9\u4e24\u4e2a\u90e8\u5206\uff0c\u53ef\u4ee5\u4f7f\u7528\u4e24\u4e2a\u66ff\u6362\u6807\u8bb0\uff1a"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"foo/{name}.{ext}\n")),(0,n.kt)("p",null,"\u8def\u5f84 ",(0,n.kt)("inlineCode",{parentName:"p"},"/foo/biz.html")," \u5c06\u4f1a\u4e0e\u4e0a\u9762\u7684\u6a21\u5f0f\u5339\u914d\uff0c\u5339\u914d\u7ed3\u679c\u662f ",(0,n.kt)("inlineCode",{parentName:"p"},"Params {'name': 'biz', 'ext': 'html'}"),"\u3002\u8fd9\u662f\u56e0\u4e3a\u5728\u4e24\u4e2a\u66ff\u6362\u6807\u8bb0 ",(0,n.kt)("inlineCode",{parentName:"p"},"{name}")," \u548c ",(0,n.kt)("inlineCode",{parentName:"p"},"{ext}")," \u4e4b\u95f4\u6709\u4e00\u4e2a\u5b57\u9762\u91cf\u90e8\u5206 ",(0,n.kt)("inlineCode",{parentName:"p"},"."),"\uff08\u53e5\u70b9\uff09\u3002"),(0,n.kt)("p",null,"\u66ff\u6362\u6807\u8bb0\u90e8\u5206\u4e5f\u53ef\u4ee5\u6307\u5b9a\u4e00\u4e2a\u6b63\u5219\u8868\u8fbe\u5f0f\uff0c\u7528\u4e8e\u51b3\u5b9a\u8def\u5f84\u6bb5\u662f\u5426\u4e0e\u6807\u8bb0\u5339\u914d\u3002\u8981\u6307\u5b9a\u66ff\u6362\u6807\u8bb0\u53ea\u5339\u914d\u6b63\u5219\u8868\u8fbe\u5f0f\u5b9a\u4e49\u7684\u7279\u5b9a\u5b57\u7b26\u96c6\uff0c\u5fc5\u987b\u4f7f\u7528\u6269\u5c55\u7684\u66ff\u6362\u6807\u8bb0\u8bed\u6cd5\u3002\u5728\u5927\u62ec\u53f7\u5185\uff0c\u66ff\u6362\u6807\u8bb0\u540d\u79f0\u540e\u5fc5\u987b\u8ddf\u4e00\u4e2a\u5192\u53f7\uff0c\u7136\u540e\u76f4\u63a5\u8ddf\u6b63\u5219\u8868\u8fbe\u5f0f\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u666e\u901a\u66ff\u6362\u6bd4\u8f83\u6240\u5bf9\u5e94\u7684\u6b63\u5219\u8868\u8fbe\u5f0f\u4e3a ",(0,n.kt)("inlineCode",{parentName:"p"},"[^/]+")," \u3002\u4f8b\u5982\uff0c\u66ff\u6362\u6807\u8bb0 ",(0,n.kt)("inlineCode",{parentName:"p"},"{foo}")," \u53ef\u4ee5\u62fc\u5199\u4e3a ",(0,n.kt)("inlineCode",{parentName:"p"},"{foo:[^/]+}"),'\uff0c\u4f60\u53ef\u4ee5\u5c06\u5176\u6539\u4e3a\u4efb\u610f\u6b63\u5219\u8868\u8fbe\u5f0f\uff0c\u4ee5\u5339\u914d\u4efb\u610f\u5b57\u7b26\u5e8f\u5217\uff0c\u4f8b\u5982\uff0c"{foo:\\d+}`"\u53ea\u5339\u914d\u6570\u5b57\u3002'),(0,n.kt)("p",null,"\u8def\u5f84\u6bb5\u4e2d\u81f3\u5c11\u5305\u542b\u4e00\u4e2a\u5b57\u7b26\uff0c\u624d\u80fd\u5339\u914d\u5230\u66ff\u6362\u6807\u8bb0\u3002\u4f8b\u5982\uff0c\u5bf9\u4e8e URL ",(0,n.kt)("inlineCode",{parentName:"p"},"/abc/"),"\uff1a"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"/abc/{foo}")," \u4e0d\u4f1a\u5339\u914d\u3002"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"/{foo}/")," \u6b63\u786e\u5339\u914d\u3002")),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},(0,n.kt)("strong",{parentName:"p"},"\u63d0\u793a"),"\uff1a\u5728\u5339\u914d\u6a21\u5f0f\u4e4b\u524d\uff0c\u8def\u5f84\u5c06\u53d6\u6d88 URL \u5f15\u53f7\u5e76\u89e3\u7801\u4e3a\u6709\u6548\u7684 unicode \u5b57\u7b26\u4e32\uff0c\u4ee3\u8868\u5339\u914d\u8def\u5f84\u6bb5\u7684\u503c\u4e5f\u5c06\u53d6\u6d88 URL \u5f15\u53f7\u3002")),(0,n.kt)("p",null,"\u4e3e\u4f8b\u6765\u8bf4\uff0c\u4e0b\u9762\u7684\u6a21\u5f0f\uff1a"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"foo/{bar}\n")),(0,n.kt)("p",null,"\u5f53\u5339\u914d\u4e0b\u9762\u7684 URL \u65f6\uff1a"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"http://example.com/foo/La%20Pe%C3%B1a\n")),(0,n.kt)("p",null,"\u5339\u914d\u540e\u7684\u53c2\u6570\u5b57\u5178\u5982\u4e0b\u6240\u793a\uff08\u503c\u4e3a\u89e3\u7801\u540e\u7684\uff09\uff1a"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"Params {'bar': 'La Pe\\xf1a'}\n")),(0,n.kt)("p",null,"\u63d0\u4f9b\u7ed9 actix \u7684\u8def\u5f84\u6bb5\u4e2d\u7684\u5b57\u9762\u91cf\u5e94\u8be5\u662f\u89e3\u7801\u540e\u7684\u503c\u3002\u4e0d\u8981\u5728\u6a21\u5f0f\u4e2d\u4f7f\u7528 URL \u7f16\u7801\u7684\u503c\u3002\u4f8b\u5982\uff0c\u4e0d\u8981\u4f7f\u7528\u8fd9\u6837\u7684\u6a21\u5f0f\uff1a"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"/Foo%20Bar/{baz}\n")),(0,n.kt)("p",null,"\u4f60\u5e94\u8be5\u50cf\u4e0b\u9762\u8fd9\u6837\u6307\u5b9a\uff1a"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"/Foo Bar/{baz}\n")),(0,n.kt)("p",null,"\u4e3a\u4e86\u83b7\u5f97\u201c\u5c3e\u90e8\u5339\u914d\u201d\uff0c\u5fc5\u987b\u4f7f\u7528\u81ea\u5b9a\u4e49\u7684\u6b63\u5219\u8868\u8fbe\u5f0f\u3002"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"foo/{bar}/{tail:.*}\n")),(0,n.kt)("p",null,"\u4e0a\u9762\u7684\u6a21\u5f0f\u5c06\u5339\u914d\u8fd9\u4e9b URL\uff0c\u5e76\u751f\u6210\u4ee5\u4e0b\u5339\u914d\u4fe1\u606f\uff1a"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"foo/1/2/           -> Params {'bar': '1', 'tail': '2/'}\nfoo/abc/def/a/b/c  -> Params {'bar': 'abc', 'tail': 'def/a/b/c'}\n")),(0,n.kt)("h2",{id:"\u8def\u7531\u4f5c\u7528\u57df"},"\u8def\u7531\u4f5c\u7528\u57df"),(0,n.kt)("p",null,"\u4f5c\u7528\u57df\u53ef\u4ee5\u5e2e\u52a9\u4f60\u7ec4\u7ec7\u5171\u4eab\u516c\u5171\u8ddf\u8def\u5f84\u7684\u8def\u7531\u3002\u4e5f\u53ef\u4ee5\u5728\u4f5c\u7528\u57df\u4e2d\u5d4c\u5957\u4f5c\u7528\u57df\u3002"),(0,n.kt)("p",null,"\u5047\u8bbe\u8981\u7ec4\u7ec7\u67e5\u8be2\u7528\u6237\u4fe1\u606f\u7684\u8def\u5f84\uff0c\u53ef\u80fd\u5305\u62ec\uff1a"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"/users"),(0,n.kt)("li",{parentName:"ul"},"/users/show"),(0,n.kt)("li",{parentName:"ul"},"/users/show/{id}")),(0,n.kt)("p",null,"\u8fd9\u4e9b\u8def\u5f84\u7684\u4f5c\u7528\u57df\u5e03\u5c40\u5982\u4e0b\uff1a"),(0,n.kt)(p.Z,{example:"url-dispatch",file:"scope.rs",section:"scope",mdxType:"CodeBlock"}),(0,n.kt)("p",null,"\u4e00\u4e2a ",(0,n.kt)("em",{parentName:"p"},"\u4f5c\u7528\u57df")," \u8def\u5f84\u4e5f\u53ef\u4ee5\u5305\u542b\u53ef\u53d8\u7684\u8def\u5f84\u6bb5\uff0c\u8fd9\u4e0e\u975e\u4f5c\u7528\u57df\u8def\u5f84\u4e00\u81f4\u3002"),(0,n.kt)("p",null,"\u4f60\u53ef\u4ee5\u4ece ",(0,n.kt)("inlineCode",{parentName:"p"},"HttpRequest::match_info()")," \u4e2d\u83b7\u53d6\u53ef\u53d8\u8def\u5f84\u6bb5\u7684\u5339\u914d\u503c\u3002",(0,n.kt)("a",{parentName:"p",href:"/docs/extractors"},(0,n.kt)("inlineCode",{parentName:"a"},"Path")," \u63d0\u53d6\u5668")," \u4e5f\u53ef\u4ee5\u63d0\u53d6\u4f5c\u7528\u57df\u7ea7\u522b\u7684\u53ef\u53d8\u8def\u5f84\u6bb5\u3002"),(0,n.kt)("h2",{id:"\u5339\u914d\u4fe1\u606f"},"\u5339\u914d\u4fe1\u606f"),(0,n.kt)("p",null,"\u5339\u914d\u5230\u7684\u6240\u6709\u53ef\u53d8\u6807\u8bb0\u7684\u503c\u90fd\u53ef\u4ee5\u901a\u8fc7 ",(0,n.kt)("a",{parentName:"p",href:"https://docs.rs/actix-web/4/actix_web/struct.HttpRequest.html#method.match_info"},(0,n.kt)("inlineCode",{parentName:"a"},"HttpRequest::match_info()"))," \u83b7\u53d6\u3002\u7279\u5b9a\u503c\u53ef\u901a\u8fc7 ",(0,n.kt)("a",{parentName:"p",href:"https://docs.rs/actix-web/4/actix_web/dev/struct.Path.html#method.get"},(0,n.kt)("inlineCode",{parentName:"a"},"Path::get()")),"\u83b7\u53d6\u3002"),(0,n.kt)(p.Z,{example:"url-dispatch",file:"minfo.rs",section:"minfo",mdxType:"CodeBlock"}),(0,n.kt)("p",null,"\u5728\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\uff0c\u5bf9\u4e8e\u8def\u5f84 ",(0,n.kt)("inlineCode",{parentName:"p"},"/a/1/2/"),'\uff0cv1 \u548c v2 \u7684\u503c\u5c06\u88ab\u89e3\u6790\u4e3a "1" \u548c "2"\u3002'),(0,n.kt)("h3",{id:"\u8def\u5f84\u4fe1\u606f\u63d0\u53d6\u5668"},"\u8def\u5f84\u4fe1\u606f\u63d0\u53d6\u5668"),(0,n.kt)("p",null,"Actix \u63d0\u4f9b\u4e86\u7c7b\u578b\u5b89\u5168\u7684\u8def\u5f84\u4fe1\u606f\u63d0\u53d6\u529f\u80fd\u3002\u4f7f\u7528 ",(0,n.kt)("a",{parentName:"p",href:"https://docs.rs/actix-web/4/actix_web/dev/struct.Path.html"},(0,n.kt)("em",{parentName:"a"},"Path")),' \u63d0\u53d6\u4fe1\u606f\u65f6\uff0c\u76ee\u6807\u7c7b\u578b\u53ef\u4ee5\u5b9a\u4e49\u4e3a\u51e0\u79cd\u4e0d\u540c\u7684\u5f62\u5f0f\u3002\u6700\u7b80\u5355\u7684\u65b9\u5f0f\u662f\u4f7f\u7528\u5143\u7ec4\u3002\u5143\u7ec4\u4e2d\u7684\u6bcf\u4e2a\u5143\u7d20\u90fd\u5fc5\u987b\u4e0e\u8def\u5f84\u6a21\u5f0f\u4e2d\u7684\u4e00\u4e2a\u5143\u7d20\u76f8\u5bf9\u5e94\u3002\u4f8b\u5982\uff0c\u4f60\u53ef\u4ee5\u5c06\u8def\u5f84\u6a21\u5f0f "/{id}/{username}/" \u4e0e Path<(u32, String)>',(0,n.kt)("inlineCode",{parentName:"p"},' \u7c7b\u578b\u5339\u914d\uff0c\u4f46\u4e0d\u80fd\u4e0e "Path<(String, String, String)>')," \u7c7b\u578b\u76f8\u5339\u914d\u3002"),(0,n.kt)(p.Z,{example:"url-dispatch",file:"path.rs",section:"path",mdxType:"CodeBlock"}),(0,n.kt)("p",null,"\u4e5f\u53ef\u4ee5\u5c06\u8def\u5f84\u6a21\u5f0f\u4fe1\u606f\u63d0\u53d6\u5230\u4e00\u4e2a\u7ed3\u6784\u4f53\u4e2d\uff0c\u8fd9\u4e2a\u7ed3\u6784\u4f53\u5fc5\u987b\u5b9e\u73b0\u4e86 ",(0,n.kt)("em",{parentName:"p"},"serde")," \u4e2d\u7684 ",(0,n.kt)("inlineCode",{parentName:"p"},"Deserialize")," \u7279\u8d28\u3002"),(0,n.kt)(p.Z,{example:"url-dispatch",file:"path2.rs",section:"path",mdxType:"CodeBlock"}),(0,n.kt)("p",null,(0,n.kt)("a",{parentName:"p",href:"https://docs.rs/actix-web/4/actix_web/web/struct.Query.html"},(0,n.kt)("em",{parentName:"a"},"Query"))," \u63d0\u4f9b\u4e86\u7c7b\u4f3c\u7684\u529f\u80fd\uff0c\u4f46\u662f\u5b83\u7528\u4e8e\u63d0\u53d6\u8bf7\u6c42\u7684\u67e5\u8be2\u53c2\u6570\u3002"),(0,n.kt)("h2",{id:"\u751f\u6210\u8d44\u6e90-url"},"\u751f\u6210\u8d44\u6e90 URL"),(0,n.kt)("p",null,"\u4f7f\u7528 ",(0,n.kt)("a",{parentName:"p",href:"https://docs.rs/actix-web/4/actix_web/struct.HttpRequest.html#method.url_for"},(0,n.kt)("em",{parentName:"a"},"HttpRequest.url_for()")),' \u65b9\u6cd5\u4f1a\u57fa\u4e8e\u8d44\u6e90\u6a21\u5f0f\u751f\u6210 URL\u3002\u4f8b\u5982\uff0c\u5982\u679c\u4f60\u914d\u7f6e\u4e86\u4e00\u4e2a\u540d\u79f0\u4e3a "foo" \u548c\u6a21\u5f0f\u4e3a "{a}/{b}/{c}" \u7684\u8d44\u6e90\uff0c\u4f60\u53ef\u4ee5\u8fd9\u6837\u505a\uff1a'),(0,n.kt)(p.Z,{example:"url-dispatch",file:"urls.rs",section:"url",mdxType:"CodeBlock"}),(0,n.kt)("p",null,"\u8fd9\u5c06\u8fd4\u56de\u7c7b\u4f3c ",(0,n.kt)("inlineCode",{parentName:"p"},"http://example.com/test/1/2/")," \u8fd9\u6837\u7684\u5b57\u7b26\u4e32\uff08\u5728\u5f53\u524d\u534f\u8bae\u548c\u4e3b\u673a\u540d\u662f ",(0,n.kt)("a",{parentName:"p",href:"http://example.com"},"http://example.com")," \u7684\u60c5\u51b5\u4e0b\uff09\u3002",(0,n.kt)("inlineCode",{parentName:"p"},"url_for")," \u65b9\u6cd5\u8fd4\u56de ",(0,n.kt)("a",{parentName:"p",href:"https://docs.rs/url/1.7.2/url/struct.Url.html"},(0,n.kt)("em",{parentName:"a"},"Url \u5bf9\u8c61")),"\uff0c\u6240\u4ee5\u4f60\u53ef\u4ee5\u4fee\u6539\u8be5 url\uff08\u6dfb\u52a0\u67e5\u8be2\u53c2\u6570\uff0c\u951a\u70b9\u7b49\uff09\u3002",(0,n.kt)("inlineCode",{parentName:"p"},"url_for()")," \u53ea\u80fd\u4e3a ",(0,n.kt)("em",{parentName:"p"},"\u547d\u540d")," \u8d44\u6e90\u8c03\u7528\uff0c\u5426\u4f1a\u4f1a\u8fd4\u56de\u9519\u8bef\u3002"),(0,n.kt)("h2",{id:"\u5916\u90e8\u8d44\u6e90"},"\u5916\u90e8\u8d44\u6e90"),(0,n.kt)("p",null,"\u6709\u6548\u7684 URL \u8d44\u6e90\u53ef\u4ee5\u6ce8\u518c\u4e3a\u5916\u90e8\u8d44\u6e90\u3002\u5b83\u4eec\u53ea\u7528\u4e8e\u751f\u6210 URL\uff0c\u5728\u8bf7\u6c42\u65f6\u4e0d\u4f1a\u8003\u8651\u5339\u914d\u3002"),(0,n.kt)(p.Z,{example:"url-dispatch",file:"url_ext.rs",section:"ext",mdxType:"CodeBlock"}),(0,n.kt)("h2",{id:"\u8def\u5f84\u89c4\u8303\u5316\u548c\u91cd\u5b9a\u5411\u5230\u9644\u52a0--\u7684\u8def\u7531"},"\u8def\u5f84\u89c4\u8303\u5316\u548c\u91cd\u5b9a\u5411\u5230\u9644\u52a0 ",(0,n.kt)("inlineCode",{parentName:"h2"},"/")," \u7684\u8def\u7531"),(0,n.kt)("p",null,"\u89c4\u8303\u5316\u610f\u5473\u7740\uff1a"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"\u5728\u8def\u5f84\u5c3e\u90e8\u8ffd\u52a0 ",(0,n.kt)("inlineCode",{parentName:"li"},"/"),"\u3002"),(0,n.kt)("li",{parentName:"ul"},"\u8bb2\u591a\u4e2a ",(0,n.kt)("inlineCode",{parentName:"li"},"/")," \u5408\u5e76\u4e3a\u4e00\u4e2a ",(0,n.kt)("inlineCode",{parentName:"li"},"/"),"\u3002")),(0,n.kt)("p",null,"\u4e00\u65e6\u627e\u5230\u6b63\u786e\u89e3\u6790\u7684\u8def\u5f84\uff0c\u5c31\u4f1a\u7acb\u5373\u8fd4\u56de\u5904\u7406\u7a0b\u5e8f\u3002\u5982\u679c\u542f\u7528\u5168\u90e8\u89c4\u8303\u5316\u6761\u4ef6\uff0c\u5c06\u4f1a\u6309\u7167\u5982\u4e0b\u987a\u5e8f\u5339\u914d\u8def\u7531\uff1a1\uff09\u5408\u5e76\uff0c2\uff09\u5408\u5e76\u548c\u8ffd\u52a0\uff0c3\uff09\u8ffd\u52a0\uff0c\u5982\u679c\u6309\u7167\u8fd9\u4e2a\u987a\u5e8f\u6ee1\u8db3\u5176\u4e2d\u4e00\u4e2a\u6761\u4ef6\uff0c\u5c31\u4f1a\u91cd\u5b9a\u5411\u5230\u65b0\u8def\u5f84\u3002"),(0,n.kt)(p.Z,{example:"url-dispatch",file:"norm.rs",section:"norm",mdxType:"CodeBlock"}),(0,n.kt)("p",null,"\u5728\u672c\u4f8b\u4e2d\uff0c",(0,n.kt)("inlineCode",{parentName:"p"},"//resource//")," \u5c06\u91cd\u5b9a\u5411\u5230",(0,n.kt)("inlineCode",{parentName:"p"},"/resource/"),"\u3002"),(0,n.kt)("p",null,"\u5728\u672c\u4f8b\u4e2d\uff0c\u4e3a\u6240\u6709\u8def\u7531\u90fd\u6ce8\u518c\u4e86\u8def\u5f84\u89c4\u8303\u5316\u5904\u7406\u7a0b\u5e8f\uff0c\u4f46\u4e0d\u5e94\u8be5\u4f9d\u8d56\u8fd9\u4e2a\u673a\u5236\u6765\u91cd\u5b9a\u5411 ",(0,n.kt)("em",{parentName:"p"},"POST")," \u8bf7\u6c42\u3002\u5982\u679c\u8ffd\u52a0 ",(0,n.kt)("inlineCode",{parentName:"p"},"/")," \u540e\u4ecd\u7136 ",(0,n.kt)("em",{parentName:"p"},"Not Found"),"\uff0c\u4f1a\u5c06 ",(0,n.kt)("em",{parentName:"p"},"POST")," \u8bf7\u6c42\u8f6c\u6362\u4e3a ",(0,n.kt)("em",{parentName:"p"},"GET")," \u8bf7\u6c42\uff0c\u4ece\u800c\u4e22\u5931\u539f\u59cb\u8bf7\u6c42\u4e2d\u7684\u6240\u6709POST\u6570\u636e\u3002"),(0,n.kt)("p",null,"\u53ef\u4ee5\u53ea\u4e3a ",(0,n.kt)("em",{parentName:"p"},"GET")," \u8bf7\u6c42\u6ce8\u518c\u89c4\u8303\u5316\u8def\u5f84\uff1a"),(0,n.kt)(p.Z,{example:"url-dispatch",file:"norm2.rs",section:"norm",mdxType:"CodeBlock"}),(0,n.kt)("h3",{id:"\u4f7f\u7528\u4e00\u4e2a\u5e94\u7528\u524d\u7f00\u6765\u7ec4\u5408\u5e94\u7528"},"\u4f7f\u7528\u4e00\u4e2a\u5e94\u7528\u524d\u7f00\u6765\u7ec4\u5408\u5e94\u7528"),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"web::scope()")," \u65b9\u6cd5\u5141\u8bb8\u8bbe\u7f6e\u7279\u5b9a\u7684\u5e94\u7528\u7a0b\u5e8f\u4f5c\u7528\u57df\u3002\u8be5\u4f5c\u7528\u57df\u4ee3\u8868\u4e00\u4e2a\u8d44\u6e90\u524d\u7f00\uff0c\u5c06\u88ab\u6dfb\u52a0\u5230\u6240\u6709\u8d44\u6e90\u6a21\u5f0f\u4e2d\u3002\u8fd9\u6709\u52a9\u4e8e\u5c06\u4e00\u7ec4\u8def\u7531\u6302\u8f7d\u5230\u4e0e\u53ef\u8c03\u7528\u8d44\u6e90\u4f5c\u8005\u610f\u56fe\u4e0d\u540c\u7684\u4f4d\u7f6e\uff0c\u540c\u65f6\u4ecd\u4fdd\u6301\u76f8\u540c\u7684\u8d44\u6e90\u540d\u79f0\u3002"),(0,n.kt)("p",null,"\u4f8b\u5982\uff1a"),(0,n.kt)(p.Z,{example:"url-dispatch",file:"scope.rs",section:"scope",mdxType:"CodeBlock"}),(0,n.kt)("p",null,"\u5728\u4e0a\u770b\u7684\u4f8b\u5b50\u4e2d\uff0c",(0,n.kt)("em",{parentName:"p"},"show_users")," \u8def\u7531\u7684\u6709\u6548\u8def\u7531\u6a21\u5f0f\u662f ",(0,n.kt)("em",{parentName:"p"},"/users/show"),"\uff0c\u800c\u4e0d\u662f ",(0,n.kt)("em",{parentName:"p"},"/show"),"\uff0c\u56e0\u4e3a\u4f5c\u7528\u57df\u5c06\u88ab\u6dfb\u52a0\u5230\u6a21\u5f0f\u4e4b\u524d\u3002\u8fd9\u6837\uff0c\u53ea\u6709\u5f53 URL \u8def\u5f84\u4e3a ",(0,n.kt)("em",{parentName:"p"},"/users/show")," \u65f6\uff0c\u8def\u7531\u624d\u4f1a\u5339\u914d\uff0c\u800c\u5f53\u4f7f\u7528\u8def\u7531\u540d\u79f0 show_users \u8c03\u7528 ",(0,n.kt)("inlineCode",{parentName:"p"},"HttpRequest.url_for()")," \u51fd\u6570\u65f6\uff0c\u5b83\u5c06\u751f\u6210\u4e00\u4e2a\u5177\u6709\u76f8\u540c\u8def\u5f84\u7684 URL\u3002"),(0,n.kt)("h2",{id:"\u81ea\u5b9a\u4e49\u8def\u7531\u5b88\u536b"},"\u81ea\u5b9a\u4e49\u8def\u7531\u5b88\u536b"),(0,n.kt)("p",null,"\u4f60\u53ef\u4ee5\u628a\u8def\u7531\u5b88\u536b\u770b\u6210\u4e00\u4e2a\u666e\u901a\u7684\u51fd\u6570\uff0c\u8fd9\u4e2a\u51fd\u6570\u63a5\u6536 ",(0,n.kt)("em",{parentName:"p"},"request")," \u5bf9\u8c61\u5f15\u7528\u4f5c\u4e3a\u53c2\u6570\uff0c\u5e76\u8fd4\u56de ",(0,n.kt)("em",{parentName:"p"},"true")," \u6216 ",(0,n.kt)("em",{parentName:"p"},"false"),"\u3002\u4ece\u5f62\u5f0f\u4e0a\u770b\uff0c\u8def\u7531\u5b88\u536b\u662f\u5b9e\u73b0\u4e86 ",(0,n.kt)("a",{parentName:"p",href:"https://docs.rs/actix-web/4/actix_web/guard/trait.Guard.html"},(0,n.kt)("inlineCode",{parentName:"a"},"Guard"))," \u7279\u8d28\u7684\u4efb\u4f55\u5bf9\u8c61\u3002Actix \u63d0\u4f9b\u4e86\u51e0\u4e2a\u5b88\u536b\uff0c\u4f60\u53ef\u4ee5\u5728 API \u6587\u6863\u7684 ",(0,n.kt)("a",{parentName:"p",href:"https://docs.rs/actix-web/4/actix_web/guard/index.html#functions"},"functions section")," \u4e2d\u67e5\u770b\u3002"),(0,n.kt)("p",null,"\u4e0b\u9762\u662f\u4e00\u4e2a\u7b80\u5355\u7684\u5b88\u536b\u793a\u4f8b\uff0c\u5b83\u68c0\u67e5\u8bf7\u6c42\u662f\u5426\u5305\u542b\u7279\u5b9a\u7684 ",(0,n.kt)("em",{parentName:"p"},"\u8bf7\u6c42\u5934"),"\uff1a"),(0,n.kt)(p.Z,{example:"url-dispatch",file:"guard.rs",section:"guard",mdxType:"CodeBlock"}),(0,n.kt)("p",null,"\u5728\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\uff0c\u53ea\u6709\u5f53\u8bf7\u6c42\u5934\u5305\u542b ",(0,n.kt)("em",{parentName:"p"},"CONTENT-TYPE")," \u65f6\uff0c\u624d\u4f1a\u8c03\u7528 ",(0,n.kt)("em",{parentName:"p"},"index")," \u5904\u7406\u7a0b\u5e8f\u3002"),(0,n.kt)("p",null,"\u5b88\u536b\u4e0d\u80fd\u8bbf\u95ee\u6216\u4fee\u6539\u8bf7\u6c42\u5bf9\u8c61\uff0c\u4f46\u662f\u53ef\u4ee5\u5728 ",(0,n.kt)("a",{parentName:"p",href:"https://docs.rs/actix-web/4/actix_web/struct.HttpRequest.html#method.extensions"},"request extensions")," \u4e2d\u5b58\u50a8\u989d\u5916\u7684\u4fe1\u606f\u3002"),(0,n.kt)("h3",{id:"\u6539\u53d8\u5b88\u536b\u7684\u542b\u4e49"},"\u6539\u53d8\u5b88\u536b\u7684\u542b\u4e49"),(0,n.kt)("p",null,"\u4f60\u53ef\u4ee5\u4f7f\u7528 ",(0,n.kt)("inlineCode",{parentName:"p"},"Not")," \u5b88\u536b\u6765\u5305\u88c5\u4efb\u4f55\u5176\u4ed6\u5b88\u536b\uff0c\u4ee5\u53cd\u8f6c\u5b88\u536b\u7684\u542b\u4e49\u3002\u4f8b\u5982\uff0c\u5982\u679c\u4f60\u60f3\u4e3a\u9664 ",(0,n.kt)("em",{parentName:"p"},"GET"),' \u4e4b\u5916\u7684\u6240\u6709\u8bf7\u6c42\u65b9\u6cd5\u8fd4\u56de "METHOD NOT ALLOWED" \u54cd\u5e94\uff1a'),(0,n.kt)(p.Z,{example:"url-dispatch",file:"guard2.rs",section:"guard2",mdxType:"CodeBlock"}),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"Any")," \u5b88\u536b\u63a5\u6536\u4e00\u4e2a\u5b88\u536b\u5217\u8868\uff0c\u5982\u5176\u4e2d\u4efb\u610f\u4e00\u4e2a\u5b88\u536b\u5339\u914d\uff0c\u5219\u5339\u914d\u3002\u4f8b\u5982\uff1a"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-rust"},"guard::Any(guard::Get()).or(guard::Post())\n")),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"All")," \u5b88\u536b\u63a5\u6536\u4e00\u4e2a\u5b88\u536b\u5217\u8868\uff0c\u6240\u6709\u7684\u5b88\u536b\u90fd\u5339\u914d\u65f6\u624d\u4f1a\u76ae\u8bf6\uff0c\u4f8b\u5982\uff1a"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-rust"},'guard::All(guard::Get()).and(guard::Header("content-type", "plain/text"))\n')),(0,n.kt)("h2",{id:"\u6539\u53d8\u9ed8\u8ba4\u7684-not-found-\u54cd\u5e94"},"\u6539\u53d8\u9ed8\u8ba4\u7684 Not Found \u54cd\u5e94"),(0,n.kt)("p",null,"\u5982\u679c\u5728\u8def\u7531\u8868\u6216\u8d44\u6e90\u8868\u4e2d\u4e0d\u80fd\u5339\u914d\u5230\u8def\u7531\uff0c\u5219\u4f1a\u4f7f\u7528\u9ed8\u8ba4\u7684\u54cd\u5e94\u3002\u73b0\u5728\u5e94\u7528\u4e2d\u9ed8\u8ba4\u54cd\u5e94\u662f ",(0,n.kt)("em",{parentName:"p"},"NOT FOUND"),"\u3002\u4e5f\u53ef\u4ee5\u4f7f\u7528 ",(0,n.kt)("inlineCode",{parentName:"p"},"App::default_service()")," \u6765\u8986\u76d6\u9ed8\u8ba4\u7684 ",(0,n.kt)("em",{parentName:"p"},"NOT FOUND")," \u54cd\u5e94\u3002\u8be5\u65b9\u6cd5\u63a5\u6536\u4e00\u4e2a ",(0,n.kt)("em",{parentName:"p"},"\u914d\u7f6e\u51fd\u6570"),"\uff0c\u8fd9\u4e0e\u4f7f\u7528 ",(0,n.kt)("inlineCode",{parentName:"p"},"App::service()")," \u65b9\u6cd5\u914d\u7f6e\u8d44\u6e90\u4e00\u6837\u3002"),(0,n.kt)(p.Z,{example:"url-dispatch",file:"dhandler.rs",section:"default",mdxType:"CodeBlock"}))}u.isMDXComponent=!0}}]);